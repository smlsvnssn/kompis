<script>
	import { fly } from 'svelte/transition'

	import KamratKompis from './KamratKompis.svelte'

	let { closeModal } = $props()

	let modalEl

	$effect(() => modalEl.focus())
</script>

<div
	class="backdrop"
	transition:fly
	role="button"
	tabindex="0"
	onclick={closeModal}
	onkeydown={e => {
		if (e.key == 'Escape') closeModal()
	}}
>
	<div
		class="modal"
		bind:this={modalEl}
		transition:fly={{ y: -100 }}
		role="button"
		tabindex="0"
		onclick={e => e.stopPropagation()}
		onkeydown={e => {
			if (e.key == 'Escape') closeModal()
		}}
	>
		<KamratKompis opacity="1" />
		<h1>S친 funkar Kamrat Kompis춽</h1>
		<p>
			I vanliga fall, n칛r du ska dela p친 en krognota, p친 m친nadens utgifter,
			eller p친 ett bilk칬p, g칬r du det f칬rmodligen l칛tt f칬r dig. Ni 칛r kanske tv친
			som ska dela, s친 ni delar p친 h칛lften. Eller s친 칛r ni tre, kliar er i
			huvudet, och lyckas dela j칛mnt p친 tre.
		</p>
		<p>
			Kamrat Kompis춽 g칬r lite annorlunda, men det 칛r lika l칛tt! Du f친r fylla i
			inkomst f칬r alla som ska dela, och vem som lagt ut vad. Sedan ser Kamrat
			Kompis춽 till att alla f친r betala i proportion till sin andel av den
			totala inkomsten, minus dina egna utgifter f칬rst친s. (Vilken sorts inkomst
			spelar ingen roll, det kan vara m친nadsinkomst, 친rsinkomst, total
			f칬rm칬genhet eller vad du vill, bara det 칛r samma sorts inkomst f칬r alla.)
		</p>
		<p>
			S친 h칛r till exempel: Berit har k칬pt ett kylsk친p f칬r 10000. Arne och Berit
			vill dela r칛ttvist p친 kostnaden. Arne tj칛nar 30000 i m친naden, och Berit
			tj칛nar 50000. De skriver in sina uppgifter, och f친r veta att Arne ska
			betala 3750 till Berit.
		</p>
		<p>
			Ni f친r en praktisk lista p친 vem som ska betala vad till vem, som g친r att
			kopiera f칬r att skicka i ett sms eller en chatt. Sedan 칛r det bara att
			swisha, eller plocka fram sedelbuntarna. Lycka till!
		</p>

		<button onclick={closeModal} type="button"> Toppen, jag fattar! </button>
		<p class="footer">
			Byggd med 游뽖, 游땐 & 游땴 av
			<a href="https://lhli.net" target="_blank"> lhli.net </a>. 游 2024
		</p>
	</div>
</div>

<style lang="scss">
	.backdrop {
		background: #0003;
		backdrop-filter: blur(0.5rem);
		position: fixed;
		inset: 0;
		height: 100%;
		z-index: 100;
		padding: 1rem;
		overflow-y: scroll;

		display: grid;
		place-items: center;

		.modal {
			border-radius: 0.5rem;
			border: none;
			padding: 1.5rem;

			overflow-y: scroll;

			max-height: 100%;
			max-width: 30rem;
			filter: drop-shadow(0px 6px 6px rgba(0, 0, 0, 0.1))
				drop-shadow(0px 1px 1px rgba(0, 0, 0, 0.1));

			background: #fffe;
			color: var(--secondary);

			display: grid;
			justify-items: center;
			gap: 0.5rem;

			h1 {
				margin: 0;
				text-align: center;
			}

			p {
				width: 100%;
				font-size: 0.875rem;
			}

			.footer {
				margin-top: 2rem;
				text-align: center;
				font-size: 0.75rem;
				a {
					color: var(--secondary);
				}
			}

			button {
				margin: auto;
				margin-top: 1rem;
				margin-bottom: 0.25rem;
			}
		}
	}
</style>
